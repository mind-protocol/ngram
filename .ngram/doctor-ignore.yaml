# Doctor Ignore Configuration
#
# This file lists issues that should be suppressed by `ngram doctor`.
# Use this for verified false positives or intentional exceptions.
#
# Each entry requires:
#   - issue_type: The issue type to suppress (e.g., MONOLITH, HARDCODED_SECRET)
#   - path: File/directory path or glob pattern (e.g., src/legacy/*, tests/**)
#   - reason: Explanation of why this is being ignored (for audit trail)
#
# Optional fields:
#   - added_by: Who added this entry (agent name, human, etc.)
#   - added_date: When added (YYYY-MM-DD)
#
# Example entries:
#
# ignores:
#   - issue_type: MONOLITH
#     path: src/generated/schema.py
#     reason: Auto-generated file, splitting not practical
#     added_by: human
#     added_date: 2025-01-15
#
#   - issue_type: HARDCODED_SECRET
#     path: tests/fixtures/**
#     reason: Test fixtures use fake credentials
#     added_by: agent
#     added_date: 2025-01-15
#
#   - issue_type: MAGIC_VALUES
#     path: src/constants.py
#     reason: This IS the constants file
#     added_by: human
#     added_date: 2025-01-15
#
# Pattern matching:
#   - Exact: "src/file.py" matches only that file
#   - Glob: "tests/**" matches all files under tests/
#   - Wildcard: "*" with issue_type suppresses ALL issues of that type (use sparingly)

ignores:
  - issue_type: BROKEN_IMPL_LINK
    path: docs/protocol/IMPLEMENTATION_Protocol_Code_Architecture.md
    reason: |
      False positive - references to .ngram/CLAUDE.md are correct but doctor's
      extract_impl_file_refs() strips leading dots (line 294: ref.lstrip('./'))
      causing .ngram/ paths to become ngram/ which doesn't exist.
      Doctor bug tracked - the doc references are valid.
    added_by: repair-agent
    added_date: 2025-12-18

  - issue_type: INCOMPLETE_IMPL
    path: ngram/repair.py
    reason: |
      False positive for get_agent_color and get_agent_symbol functions.
      These are complete one-liner utility functions that index into color/symbol
      arrays. File contains explicit comment at lines 47-50 stating these are
      "intentionally simple one-line utility functions" and "Short body does not
      mean incomplete". Doctor's empty function detection incorrectly flags
      single-line implementations.
    added_by: repair-agent
    added_date: 2025-12-18

  - issue_type: INCOMPLETE_IMPL
    path: ngram/repair_core.py
    reason: |
      False positive for get_issue_symbol and get_issue_action_parts functions.
      These are complete one-liner dictionary lookups with sensible defaults.
      Short body does not mean incomplete - they are working implementations
      used throughout the codebase.
    added_by: repair-agent
    added_date: 2025-12-18

  - issue_type: INCOMPLETE_IMPL
    path: ngram/tui/app.py
    reason: |
      False positive - the flagged functions are implemented, just short:
      - _startup_sequence: Awaits two method calls (doctor check + manager overview)
      - on_claude_output: Nested callback that adds messages to panel
      - _build_manager_overview_prompt: Returns multi-line string prompt
      - on_click: Focuses input bar (2 statements)
      - on_exception: Calls log_error (1 statement, intentionally minimal)
      - action_doctor: Awaits _run_doctor (delegating method)
      - action_repair: Awaits handle_command (delegating method)
      These are legitimate short methods, not incomplete implementations.
      Doctor bug: threshold of ≤2 lines is too aggressive for delegating methods.
    added_by: repair-agent
    added_date: 2025-12-18

  - issue_type: INCOMPLETE_IMPL
    path: ngram/tui/state.py
    reason: |
      False positive - all 10 flagged functions are fully implemented:
      - to_dict: Returns dict with role, content, timestamp
      - get_recent: Returns sliced messages list
      - clear: Clears messages and saves
      - duration: Property returning time.time() - start_time
      - is_active: Property returning status == "running"
      - append_output: Appends text to output_buffer
      - get_output: Joins output_buffer with newlines
      - add_agent: Appends agent to active_agents
      - add_manager_message: Appends message to manager_messages
      - active_count: Property summing active agents
      These are intentionally simple one-liner accessor/mutator methods on
      dataclasses. Short body != incomplete. Doctor's ≤2 line threshold is
      too aggressive for dataclass utility methods.
    added_by: repair-agent
    added_date: 2025-12-19

  - issue_type: INCOMPLETE_IMPL
    path: ngram/tui/manager.py
    reason: |
      False positive - all 4 flagged functions are fully implemented:
      - is_running: Property returning self._running (1-line accessor)
      - extract_changed_files: Uses regex self._file_patterns.findall() and returns
        deduplicated list - complete file extraction logic
      - extract_doc_updates: Uses regex self._doc_patterns.findall() and returns
        deduplicated list - complete doc extraction logic
      - on_agent_complete: Delegation pattern calling await self.monitor_agent(agent)
        which performs the actual drift check
      These are legitimate short methods implementing real functionality.
      Doctor's ≤2 line threshold incorrectly flags property accessors,
      regex extraction utilities, and delegation methods.
    added_by: repair-agent
    added_date: 2025-12-19

  - issue_type: INCOMPLETE_IMPL
    path: ngram/tui/widgets/status_bar.py
    reason: |
      False positive - all 6 flagged functions are fully implemented:
      - set_folder: Sets _folder attribute and calls _refresh_display() (2 lines)
      - update_health: Bounds-checks score, sets _health, refreshes display (2 lines)
      - set_repair_progress: Full implementation (14 lines) updating progress state
        and managing animation start/stop lifecycle
      - _start_animation: Starts interval timer via set_interval() (2 lines)
      - _animate: Increments animation frame and refreshes display (2 lines)
      - _refresh_display: Calls self.update() with formatted bar content (1 line)
      These are complete implementations. The short methods are intentionally concise
      for maintainability. Doctor's ≤2 line threshold incorrectly flags them.
    added_by: repair-agent
    added_date: 2025-12-19

  - issue_type: INCOMPLETE_IMPL
    path: ngram/tui/widgets/input_bar.py
    reason: |
      False positive - all 4 flagged functions are fully implemented:
      - CommandSubmitted.__init__: Sets self.command and calls super().__init__()
      - ShowSuggestions.__init__: Sets self.suggestions list and calls super().__init__()
      - value getter property: Returns self.text (line 108)
      - value setter property: Sets self.text = new_value (line 113)
      These are standard Message subclass constructors and property accessors.
      Short implementations != incomplete implementations.
      Doctor's ≤2 line threshold incorrectly flags these legitimate one-liners.
    added_by: repair-agent
    added_date: 2025-12-19

  - issue_type: INCOMPLETE_IMPL
    path: ngram/tui/widgets/manager_panel.py
    reason: |
      False positive - all 6 flagged functions are fully implemented:
      - __init__: Calls super().__init__(**kwargs) and initializes _messages list (2 lines)
      - on_mount: Intentionally empty with comment "No header - clean look"
      - _is_at_bottom: Returns scroll position check with tolerance (1 line)
      - _auto_scroll: Conditional scroll to end logic (2 lines)
      - add_tool_call: Full implementation (30+ lines) with formatting and widget mounting
      - escape_markup: Nested function with complete Rich markup escaping logic
      These are complete implementations. The short methods are intentionally concise.
      Doctor's ≤2 line threshold incorrectly flags short but complete methods.
    added_by: repair-agent
    added_date: 2025-12-19

  - issue_type: HARDCODED_CONFIG
    path: ngram/repo_overview.py
    reason: |
      False positive - the value 2000 at line 121 is NOT a port number.
      It's a character count limit for scanning file headers:
        # Only search in first 2000 chars (file header)
        header = content[:2000]
      This limits how much of a file to scan when looking for DOCS: references
      in the file header. The doctor's pattern detection incorrectly identified
      this as a "hardcoded port" because 2000 resembles common port numbers.
      This is an implementation constant, not network configuration.
    added_by: repair-agent
    added_date: 2025-12-19
