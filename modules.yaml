# =============================================================================
# MODULE MANIFEST
# =============================================================================
#
# This file maps code to documentation and carries rich context about each module.
#
# WHEN TO UPDATE:
# - Creating new code directories → add module mapping
# - Creating new doc modules → add mapping
# - Refactoring/moving code → update patterns
# - Changing module maturity → update status
#
# VALIDATION:
# `ngram validate` warns about unmapped code directories.
#
# =============================================================================

modules:
  # ---------------------------------------------------------------------------
  # EXAMPLE MODULE (delete or modify)
  # ---------------------------------------------------------------------------
  # example:
  #   code: "src/example/**"           # Glob pattern for source files
  #   docs: "docs/area/example/"       # Path to documentation
  #   tests: "tests/example/"          # Path to tests (optional)
  #
  #   maturity: DESIGNING              # DESIGNING | CANONICAL | PROPOSED | DEPRECATED
  #   owner: agent                     # agent | human | team-name
  #
  #   entry_points:                    # Main files to start reading (optional)
  #     - index.ts
  #     - Example.tsx
  #
  #   internal:                        # Implementation details, not public API (optional)
  #     - helpers.ts
  #     - utils.ts
  #
  #   depends_on:                      # Other modules this requires (optional)
  #     - types
  #     - utils
  #
  #   patterns:                        # Conventions to follow (optional)
  #     - "React functional components"
  #     - "Tailwind styling"
  #
  #   notes: |                         # Quick context (optional)
  #     Brief description of what this module does
  #     and any important context for working with it.

# =============================================================================
# YOUR MODULES
# =============================================================================

  # The core ADD Framework CLI implementation
  ngram-cli:
    code: "src/ngram/**"
    docs: "docs/cli/"
    maturity: DESIGNING
    owner: agent

    entry_points:
      - cli.py              # Main CLI entry point

    # Subsystems with their extracted helper modules
    subsystems:
      doctor:
        - doctor.py           # Health check orchestration (OK - 211L)
        - doctor_checks.py    # All health check functions (SPLIT - 1732L, needs further split)
        - doctor_types.py     # DoctorIssue, DoctorConfig types
        - doctor_report.py    # Report generation, scoring (WATCH)
        - doctor_files.py     # File discovery utilities
      repair:
        - repair.py           # Repair orchestration (SPLIT - needs more extraction)
        - repair_instructions.py  # Issue-specific prompts (SPLIT)
      project_map:
        - project_map.py      # Terminal dependency map
        - project_map_html.py # HTML export

    internal:
      - utils.py
      - __pycache__/

    patterns:
      - "Command Pattern for CLI subcommands"
      - "Composition for health checks"
      - "Subprocess isolation for agents"
      - "Factory pattern for repair prompts"

    notes: |
      The core ADD Framework CLI implementation.
      Provides commands: init, validate, doctor, repair, sync, context, prompt, map.
      Uses subprocess to spawn Claude Code agents for automated repairs.

      SPLIT status files need continued extraction - see IMPLEMENTATION doc for details.

  # ngram TUI - Claude Code-style interactive interface
  ngram-tui:
    # code: "src/ngram/tui/**"  # Not yet implemented - see notes
    docs: "docs/tui/"
    maturity: DESIGNING
    owner: agent

    depends_on:
      - ngram-cli           # Will use repair_core, doctor functionality

    patterns:
      - "Textual framework for TUI"
      - "Async agent spawning"
      - "CSS-based styling (TCSS)"
      - "Manager + Workers column layout"

    notes: |
      Claude Code-style TUI interface for ngram.
      STATUS: DOCS ONLY - code not yet implemented.
      See docs/tui/SYNC_TUI_State.md for implementation plan.
      Entry point will be: `ngram` (no subcommand).
      Planned: Persistent session with manager and worker agent columns.

  # Add more modules as they emerge...
